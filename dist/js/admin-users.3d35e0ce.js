(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["admin-users"],{3467:function(e,t,a){},e10c:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md4:"","mt-3":"","pl-4":""}},[a("v-toolbar-title",[e._v(e._s(e.$t("users.TITLE")))])],1),a("v-flex",{attrs:{xs12:"",sm6:"",md4:"","px-3":""}},[a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:e.$t("dataTable.SEARCH"),"single-line":"","hide-details":"",clearable:"","clear-icon":"mdi-close"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md4:"","text-xs-right":"","mb-2":"","mt-2":"","pr-2":""}},[a("v-dialog",{attrs:{"max-width":"800px","content-class":"dlgNewEditItem"},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-btn",e._g({staticClass:"btnNewItem pr-4",attrs:{color:"secondary"}},s),[a("v-icon",{staticClass:"mr-2"},[e._v("mdi-plus")]),e._v(" "+e._s(e.$t("dataTable.NEW_ITEM"))+" ")],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[e.editedItem._id?[a("v-flex",{attrs:{xs12:"",md4:""}},[a("label",{attrs:{for:"createdAt"}},[e._v(e._s(e.$t("common.CREATED")))]),a("div",{attrs:{name:"createdAt"}},[e._v(" "+e._s(e.getFormat(e.editedItem.createdAt))+" ")])]),a("v-flex",{attrs:{xs12:"",md4:""}},[a("label",{attrs:{for:"updatedAt"}},[e._v(e._s(e.$t("common.UPDATED")))]),a("div",{attrs:{name:"updatedAt"}},[e._v(" "+e._s(e.getFormat(e.editedItem.updatedAt))+" ")])]),a("v-flex",{attrs:{xs12:"",md4:""}},[a("label",{attrs:{for:"verified"}},[e._v(e._s(e.$t("users.headers.VERIFIED")))]),a("div",{attrs:{name:"verified"},domProps:{innerHTML:e._s(e.trueFalse(e.editedItem.verified))}})])]:e._e(),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate.disable",value:"required",expression:"'required'",modifiers:{disable:!0}}],attrs:{id:"name",name:"name",label:e.$t("users.headers.NAME"),"data-vv-as":e.$t("users.headers.NAME"),error:e.errors.has("name"),"error-messages":e.errors.collect("name"),autocomplete:"off"},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate.disable",value:"required|email",expression:"'required|email'",modifiers:{disable:!0}}],attrs:{id:"email",name:"email",type:"email",label:e.$t("users.headers.EMAIL"),"data-vv-as":e.$t("users.headers.EMAIL"),error:e.errors.has("email"),"error-messages":e.errors.collect("email"),autocomplete:"off"},model:{value:e.editedItem.email,callback:function(t){e.$set(e.editedItem,"email",t)},expression:"editedItem.email"}})],1),e.editedItem._id?e._e():[a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate.disable",value:"required|min:5",expression:"'required|min:5'",modifiers:{disable:!0}}],key:"password",ref:"password",attrs:{id:"password",name:"password",type:"password",label:e.$t("users.PASSWORD"),"data-vv-as":e.$t("users.PASSWORD"),error:e.errors.has("password"),"error-messages":e.errors.collect("password"),autocomplete:"off"},model:{value:e.editedItem.password,callback:function(t){e.$set(e.editedItem,"password",t)},expression:"editedItem.password"}})],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate.disable",value:"required|min:5|confirmed:password",expression:"'required|min:5|confirmed:password'",modifiers:{disable:!0}}],key:"confirmPassword",attrs:{id:"confirmPassword",name:"confirmPassword",type:"password",label:e.$t("users.CONFIRM_PASSWORD"),"data-vv-as":e.$t("users.PASSWORD"),error:e.errors.has("confirmPassword"),"error-messages":e.errors.collect("confirmPassword"),autocomplete:"off"},model:{value:e.editedItem.confirmPassword,callback:function(t){e.$set(e.editedItem,"confirmPassword",t)},expression:"editedItem.confirmPassword"}})],1)],a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-select",{directives:[{name:"validate",rawName:"v-validate.disable",value:"required",expression:"'required'",modifiers:{disable:!0}}],staticClass:"inputRole",attrs:{clearable:"",id:"role",name:"role",items:e.roles,"item-text":"name","item-value":"value",label:e.$t("users.headers.ROLE"),"data-vv-as":e.$t("users.headers.ROLE"),error:e.errors.has("role"),"error-messages":e.errors.collect("role")},model:{value:e.editedItem.role,callback:function(t){e.$set(e.editedItem,"role",t)},expression:"editedItem.role"}})],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate.disable",value:"required",expression:"'required'",modifiers:{disable:!0}}],staticClass:"inputCity",attrs:{id:"city",name:"city",label:e.$t("users.headers.CITY"),"search-input":e.searchInput,items:e.allCities,clearable:"","data-vv-as":e.$t("users.headers.CITY"),error:e.errors.has("city"),"error-messages":e.errors.collect("city"),autocomplete:"off"},on:{"update:searchInput":function(t){e.searchInput=t},"update:search-input":function(t){e.searchInput=t}},model:{value:e.editedItem.city,callback:function(t){e.$set(e.editedItem,"city",t)},expression:"editedItem.city"}})],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate.disable",value:"required",expression:"'required'",modifiers:{disable:!0}}],attrs:{id:"country",name:"country",label:e.$t("users.headers.COUNTRY"),"data-vv-as":e.$t("users.headers.COUNTRY"),error:e.errors.has("country"),"error-messages":e.errors.collect("country"),autocomplete:"off"},model:{value:e.editedItem.country,callback:function(t){e.$set(e.editedItem,"country",t)},expression:"editedItem.country"}})],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate.disable",value:"required",expression:"'required'",modifiers:{disable:!0}}],attrs:{id:"phone",name:"phone",type:"tel",label:e.$t("users.headers.PHONE"),"data-vv-as":e.$t("users.headers.PHONE"),error:e.errors.has("phone"),"error-messages":e.errors.collect("phone"),autocomplete:"off"},model:{value:e.editedItem.phone,callback:function(t){e.$set(e.editedItem,"phone",t)},expression:"editedItem.phone"}})],1)],2)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"btnCancel",attrs:{color:"red lighten3",flat:""},on:{click:e.close}},[e._v(e._s(e.$t("dataTable.CANCEL")))]),a("v-btn",{staticClass:"btnSave",attrs:{color:"yellow lighten3",flat:""},on:{click:e.save}},[e._v(e._s(e.$t("dataTable.SAVE")))])],1)],1)],1)],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{"must-sort":"",loading:e.dataTableLoading,"rows-per-page-text":e.$t("dataTable.ROWS_PER_PAGE"),"no-data-text":e.$t("dataTable.NO_DATA"),"no-results-text":e.$t("dataTable.NO_RESULTS"),"rows-per-page-items":[5,10,25],headers:e.headers,items:e.items,pagination:e.pagination,"total-items":e.totalItems},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",{staticClass:"fill-height px-0"},[a("v-layout",{staticClass:"justify-center"},[a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"mx-0",attrs:{slot:"activator",icon:""},on:{click:function(a){return e.editItem(t.item)}},slot:"activator"},[a("v-icon",[e._v("mdi-pencil")])],1),a("span",[e._v(e._s(e.$t("dataTable.EDIT")))])],1),a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"mx-0",attrs:{slot:"activator",icon:""},on:{click:function(a){return e.deleteItem(t.item)}},slot:"activator"},[a("v-icon",[e._v("mdi-delete")])],1),a("span",[e._v(e._s(e.$t("dataTable.DELETE")))])],1)],1)],1),a("td",[e._v(e._s(t.item.name))]),a("td",[e._v(e._s(t.item.email))]),a("td",[e._v(e._s(e.roleName(t.item.role)))]),a("td",{domProps:{innerHTML:e._s(e.trueFalse(t.item.verified))}}),a("td",[e._v(e._s(t.item.city))]),a("td",[e._v(e._s(t.item.country))]),a("td",[e._v(e._s(t.item.phone))]),a("td",[e._v(e._s(e.getFormat(t.item.createdAt)))]),a("td",[e._v(e._s(e.getFormat(t.item.updatedAt)))])]}},{key:"pageText",fn:function(t){return[e._v(" "+e._s(t.pageStart)+" - "+e._s(t.pageStop)+" "+e._s(e.$t("dataTable.OF"))+" "+e._s(t.itemsLength)+" ")]}},{key:"no-data",fn:function(){return[e._v(e._s(e.$t("dataTable.NO_DATA")))]},proxy:!0},{key:"no-results",fn:function(){return[e._v(e._s(e.$t("dataTable.NO_RESULTS")))]},proxy:!0}])}),a("ErrorMessage"),a("SuccessMessage")],1)},i=[],r=a("2f62"),d=a("fa7d"),l={metaInfo(){return{title:this.$store.getters.appTitle,titleTemplate:`${this.$t("users.TITLE")} - %s`}},data(){return{searchInput:"",dataTableLoading:!0,delayTimer:null,dialog:!1,search:"",pagination:{},editedItem:{},defaultItem:{},fieldsToSearch:["name","email","role","city","country","phone"]}},computed:{roles(){return[{name:this.$t("roles.ADMIN"),value:"admin"},{name:this.$t("roles.USER"),value:"user"}]},allCities(){return this.$store.state.cities.allCities},formTitle(){return this.editedItem._id?this.$t("dataTable.EDIT_ITEM"):this.$t("dataTable.NEW_ITEM")},headers(){return[{text:this.$i18n.t("dataTable.ACTIONS"),value:"_id",sortable:!1,width:100},{text:this.$i18n.t("users.headers.NAME"),align:"left",sortable:!0,value:"name"},{text:this.$i18n.t("users.headers.EMAIL"),align:"left",sortable:!0,value:"email"},{text:this.$i18n.t("users.headers.ROLE"),align:"left",sortable:!0,value:"role"},{text:this.$i18n.t("users.headers.VERIFIED"),align:"left",sortable:!0,value:"verified"},{text:this.$i18n.t("users.headers.CITY"),align:"left",sortable:!0,value:"city"},{text:this.$i18n.t("users.headers.COUNTRY"),align:"left",sortable:!0,value:"country"},{text:this.$i18n.t("users.headers.PHONE"),align:"left",sortable:!0,value:"phone"},{text:this.$i18n.t("common.CREATED"),align:"left",sortable:!0,value:"createdAt"},{text:this.$i18n.t("common.UPDATED"),align:"left",sortable:!0,value:"updatedAt"}]},items(){return this.$store.state.adminUsers.users},totalItems(){return this.$store.state.adminUsers.totalUsers}},watch:{dialog(e){return!!e||this.close()},pagination:{async handler(){try{this.dataTableLoading=!0,await this.getUsers(Object(d["a"])(this.pagination,this.buildSearch())),this.dataTableLoading=!1}catch(e){this.dataTableLoading=!1}},deep:!0},search(){clearTimeout(this.delayTimer),this.delayTimer=setTimeout(()=>{this.doSearch()},400)}},methods:{...Object(r["b"])(["getAllCities","getUsers","editUser","saveUser","deleteUser"]),getFormat(e){return window.__localeId__=this.$store.getters.locale,Object(d["e"])(e,"iii, MMMM d yyyy, h:mm a")},roleName(e){return"admin"===e?this.$t("roles.ADMIN"):this.$t("roles.USER")},trueFalse(e){return e?'<i aria-hidden="true" class="v-icon mdi mdi-check green--text" style="font-size: 16px;"></i>':'<i aria-hidden="true" class="v-icon mdi mdi-close red--text" style="font-size: 16px;"></i>'},async doSearch(){try{this.dataTableLoading=!0,await this.getUsers(Object(d["a"])(this.pagination,this.buildSearch())),this.dataTableLoading=!1}catch(e){this.dataTableLoading=!1}},buildSearch(){return this.search?{query:this.search,fields:this.fieldsToSearch.join(",")}:{}},editItem(e){this.editedItem=Object.assign({},e),this.dialog=!0},async deleteItem(e){try{const t=await this.$confirm(this.$t("common.DO_YOU_REALLY_WANT_TO_DELETE_THIS_ITEM"),{title:this.$t("common.WARNING"),buttonTrueText:this.$t("common.DELETE"),buttonFalseText:this.$t("common.CANCEL"),buttonTrueColor:"red lighten3",buttonFalseColor:"yellow lighten3"});t&&(this.dataTableLoading=!0,await this.deleteUser(e._id),await this.getUsers(Object(d["a"])(this.pagination,this.buildSearch())),this.dataTableLoading=!1)}catch(t){this.dataTableLoading=!1}},close(){this.dialog=!1,setTimeout(()=>{this.editedItem=Object.assign({},this.defaultItem)},300)},async save(){try{const e=await this.$validator.validateAll();if(e)return this.dataTableLoading=!0,this.editedItem._id?(await this.editUser(this.editedItem),await this.getUsers(Object(d["a"])(this.pagination,this.buildSearch())),this.dataTableLoading=!1):(await this.saveUser({name:this.editedItem.name,email:this.editedItem.email,password:this.editedItem.password,role:this.editedItem.role,phone:this.editedItem.phone,city:this.editedItem.city,country:this.editedItem.country}),await this.getUsers(Object(d["a"])(this.pagination,this.buildSearch())),this.dataTableLoading=!1),void this.close()}catch(e){this.dataTableLoading=!1,this.close()}}},async mounted(){await this.getAllCities()}},o=l,n=(a("e954"),a("2877")),m=a("6544"),c=a.n(m),u=a("c6a6"),v=a("8336"),h=a("b0af"),p=a("99d9"),f=a("12b2"),b=a("a523"),g=a("8fea"),x=a("169a"),_=a("0e8f"),T=a("132d"),I=a("a722"),$=a("b56d"),y=a("9910"),w=a("2677"),E=a("2a7f"),A=a("3a2f"),C=Object(n["a"])(o,s,i,!1,null,null,null);t["default"]=C.exports;c()(C,{VAutocomplete:u["a"],VBtn:v["a"],VCard:h["a"],VCardActions:p["b"],VCardText:p["d"],VCardTitle:f["a"],VContainer:b["a"],VDataTable:g["a"],VDialog:x["a"],VFlex:_["a"],VIcon:T["a"],VLayout:I["a"],VSelect:$["a"],VSpacer:y["e"],VTextField:w["a"],VToolbarTitle:E["d"],VTooltip:A["a"]})},e954:function(e,t,a){"use strict";var s=a("3467"),i=a.n(s);i.a}}]);