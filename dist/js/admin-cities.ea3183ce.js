(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["admin-cities"],{"31fc":function(t,a,e){"use strict";var i=e("b820"),s=e.n(i);s.a},b820:function(t,a,e){},ba48:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("v-layout",{attrs:{wrap:""}},[e("v-flex",{attrs:{xs12:"",sm12:"",md4:"","mt-3":"","pl-4":""}},[e("v-toolbar-title",[t._v(t._s(t.$t("cities.TITLE")))])],1),e("v-flex",{attrs:{xs12:"",sm6:"",md4:"","px-3":""}},[e("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:t.$t("dataTable.SEARCH"),"single-line":"","hide-details":"",clearable:"","clear-icon":"mdi-close"},model:{value:t.search,callback:function(a){t.search=a},expression:"search"}})],1),e("v-flex",{attrs:{xs12:"",sm6:"",md4:"","text-xs-right":"","mb-2":"","mt-2":"","pr-2":""}},[e("v-dialog",{attrs:{"max-width":"500px","content-class":"dlgNewEditItem"},scopedSlots:t._u([{key:"activator",fn:function(a){var i=a.on;return[e("v-btn",t._g({staticClass:"btnNewItem pr-4",attrs:{color:"secondary"}},i),[e("v-icon",{staticClass:"mr-2"},[t._v("mdi-plus")]),t._v(" "+t._s(t.$t("dataTable.NEW_ITEM"))+" ")],1)]}}]),model:{value:t.dialog,callback:function(a){t.dialog=a},expression:"dialog"}},[e("v-card",[e("v-card-title",[e("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),e("v-card-text",[e("v-container",{attrs:{"grid-list-md":""}},[e("v-layout",{attrs:{wrap:""}},[t.editedItem._id?[e("v-flex",{attrs:{xs12:"",md6:""}},[e("label",{attrs:{for:"createdAt"}},[t._v(t._s(t.$t("common.CREATED")))]),e("div",{attrs:{name:"createdAt"}},[t._v(" "+t._s(t.getFormat(t.editedItem.createdAt))+" ")])]),e("v-flex",{attrs:{xs12:"",md6:""}},[e("label",{attrs:{for:"updatedAt"}},[t._v(t._s(t.$t("common.UPDATED")))]),e("div",{attrs:{name:"updatedAt"}},[t._v(" "+t._s(t.getFormat(t.editedItem.updatedAt))+" ")])])]:t._e(),e("v-flex",{attrs:{xs12:""}},[e("v-text-field",{directives:[{name:"validate",rawName:"v-validate.disable",value:"required",expression:"'required'",modifiers:{disable:!0}}],attrs:{id:"name",name:"name",label:t.$t("cities.headers.NAME"),"data-vv-as":t.$t("cities.headers.NAME"),error:t.errors.has("name"),"error-messages":t.errors.collect("name"),autocomplete:"off"},model:{value:t.editedItem.name,callback:function(a){t.$set(t.editedItem,"name",a)},expression:"editedItem.name"}})],1)],2)],1)],1),e("v-card-actions",[e("v-spacer"),e("v-btn",{staticClass:"btnCancel",attrs:{color:"red lighten3",flat:""},on:{click:t.close}},[t._v(t._s(t.$t("dataTable.CANCEL")))]),e("v-btn",{staticClass:"btnSave",attrs:{color:"yellow lighten3",flat:""},on:{click:t.save}},[t._v(t._s(t.$t("dataTable.SAVE")))])],1)],1)],1)],1)],1),e("v-data-table",{staticClass:"elevation-1",attrs:{"must-sort":"",loading:t.dataTableLoading,"rows-per-page-text":t.$t("dataTable.ROWS_PER_PAGE"),"no-data-text":t.$t("dataTable.NO_DATA"),"no-results-text":t.$t("dataTable.NO_RESULTS"),"rows-per-page-items":[5,10,25],headers:t.headers,items:t.items,pagination:t.pagination,"total-items":t.totalItems},on:{"update:pagination":function(a){t.pagination=a}},scopedSlots:t._u([{key:"items",fn:function(a){return[e("td",{staticClass:"fill-height px-0"},[e("v-layout",{staticClass:"justify-center"},[e("v-tooltip",{attrs:{top:""}},[e("v-btn",{staticClass:"mx-0",attrs:{slot:"activator",icon:""},on:{click:function(e){return t.editItem(a.item)}},slot:"activator"},[e("v-icon",[t._v("mdi-pencil")])],1),e("span",[t._v(t._s(t.$t("dataTable.EDIT")))])],1),e("v-tooltip",{attrs:{top:""}},[e("v-btn",{staticClass:"mx-0",attrs:{slot:"activator",icon:""},on:{click:function(e){return t.deleteItem(a.item)}},slot:"activator"},[e("v-icon",[t._v("mdi-delete")])],1),e("span",[t._v(t._s(t.$t("dataTable.DELETE")))])],1)],1)],1),e("td",[t._v(t._s(a.item.name))]),e("td",[t._v(t._s(t.getFormat(a.item.createdAt)))]),e("td",[t._v(t._s(t.getFormat(a.item.updatedAt)))])]}},{key:"pageText",fn:function(a){return[t._v(" "+t._s(a.pageStart)+" - "+t._s(a.pageStop)+" "+t._s(t.$t("dataTable.OF"))+" "+t._s(a.itemsLength)+" ")]}},{key:"no-data",fn:function(){return[t._v(t._s(t.$t("dataTable.NO_DATA")))]},proxy:!0},{key:"no-results",fn:function(){return[t._v(t._s(t.$t("dataTable.NO_RESULTS")))]},proxy:!0}])}),e("ErrorMessage"),e("SuccessMessage")],1)},s=[],l=e("2f62"),d=e("fa7d"),n={metaInfo(){return{title:this.$store.getters.appTitle,titleTemplate:`${this.$t("cities.TITLE")} - %s`}},data(){return{dataTableLoading:!0,delayTimer:null,dialog:!1,search:"",pagination:{},editedItem:{},defaultItem:{},fieldsToSearch:["name"]}},computed:{formTitle(){return this.editedItem._id?this.$t("dataTable.EDIT_ITEM"):this.$t("dataTable.NEW_ITEM")},headers(){return[{text:this.$i18n.t("dataTable.ACTIONS"),value:"_id",sortable:!1,width:100},{text:this.$i18n.t("cities.headers.NAME"),align:"left",sortable:!0,value:"name"},{text:this.$i18n.t("common.CREATED"),align:"left",sortable:!0,value:"createdAt"},{text:this.$i18n.t("common.UPDATED"),align:"left",sortable:!0,value:"updatedAt"}]},items(){return this.$store.state.adminCities.cities},totalItems(){return this.$store.state.adminCities.totalCities}},watch:{dialog(t){return!!t||this.close()},pagination:{async handler(){try{this.dataTableLoading=!0,await this.getCities(Object(d["a"])(this.pagination,this.buildSearch())),this.dataTableLoading=!1}catch(t){this.dataTableLoading=!1}},deep:!0},async search(){clearTimeout(this.delayTimer),this.delayTimer=setTimeout(()=>{this.doSearch()},400)}},methods:{...Object(l["b"])(["getCities","editCity","saveCity","deleteCity"]),getFormat(t){return window.__localeId__=this.$store.getters.locale,Object(d["e"])(t,"iii, MMMM d yyyy, h:mm a")},async doSearch(){try{this.dataTableLoading=!0,await this.getCities(Object(d["a"])(this.pagination,this.buildSearch())),this.dataTableLoading=!1}catch(t){this.dataTableLoading=!1}},buildSearch(){return this.search?{query:this.search,fields:this.fieldsToSearch.join(",")}:{}},editItem(t){this.editedItem=Object.assign({},t),this.dialog=!0},async deleteItem(t){try{const a=await this.$confirm(this.$t("common.DO_YOU_REALLY_WANT_TO_DELETE_THIS_ITEM"),{title:this.$t("common.WARNING"),buttonTrueText:this.$t("common.DELETE"),buttonFalseText:this.$t("common.CANCEL"),buttonTrueColor:"red lighten3",buttonFalseColor:"yellow lighten3"});a&&(this.dataTableLoading=!0,await this.deleteCity(t._id),await this.getCities(Object(d["a"])(this.pagination,this.buildSearch())),this.dataTableLoading=!1)}catch(a){this.dataTableLoading=!1}},close(){this.dialog=!1,setTimeout(()=>{this.editedItem=Object.assign({},this.defaultItem)},300)},async save(){try{const t=await this.$validator.validateAll();t&&(this.dataTableLoading=!0,this.editedItem._id?(await this.editCity(this.editedItem),await this.getCities(Object(d["a"])(this.pagination,this.buildSearch())),this.dataTableLoading=!1):(await this.saveCity({name:this.editedItem.name}),await this.getCities(Object(d["a"])(this.pagination,this.buildSearch())),this.dataTableLoading=!1),this.close())}catch(t){this.dataTableLoading=!1,this.close()}}}},o=n,r=(e("31fc"),e("2877")),c=e("6544"),m=e.n(c),h=e("8336"),u=e("b0af"),b=e("99d9"),v=e("12b2"),T=e("a523"),g=e("8fea"),_=e("169a"),p=e("0e8f"),f=e("132d"),x=e("a722"),C=e("9910"),E=e("2677"),y=e("2a7f"),I=e("3a2f"),$=Object(r["a"])(o,i,s,!1,null,null,null);a["default"]=$.exports;m()($,{VBtn:h["a"],VCard:u["a"],VCardActions:b["b"],VCardText:b["d"],VCardTitle:v["a"],VContainer:T["a"],VDataTable:g["a"],VDialog:_["a"],VFlex:p["a"],VIcon:f["a"],VLayout:x["a"],VSpacer:C["e"],VTextField:E["a"],VToolbarTitle:y["d"],VTooltip:I["a"]})}}]);